# 設計書作成標準規約

**文書番号**: PROJ-STD-001  
**プロジェクト名**: 昆虫自動観察＆ログ記録アプリ  
**文書名**: 設計書作成標準規約  
**バージョン**: 2.0  
**作成日**: 2025-07-28  
**作成者**: 開発チーム  

---

## 📋 目的

本文書は、昆虫自動観察システムプロジェクトにおける設計書作成の標準化を図ることを目的とします。

---

## 🏗️ 設計書の分類

### 設計書階層

```
📁 docs/design/
├── 📁 basic_design/           # 基本設計書
│   ├── 📁 architecture/       # システムアーキテクチャ
│   ├── 📁 data/              # データ設計
│   ├── 📁 hardware/          # ハードウェア設計
│   └── 📁 interface/         # インターフェース設計
└── 📁 detailed_design/        # 詳細設計書
    ├── 📁 software/          # ソフトウェア設計
    └── 📁 processing/        # 処理説明書
```

---

## 📝 文書作成ルール

### 1. 文書ヘッダー規約

```markdown
# [文書名]

**文書番号**: 12-002-[カテゴリ]-[連番]  
**プロジェクト名**: 昆虫自動観察＆ログ記録アプリ  
**文書名**: [文書名]  
**バージョン**: [X.Y]  
**作成日**: YYYY-MM-DD  
**作成者**: [作成者名]  

---
```

### 2. 文書番号命名規則

| カテゴリ | 略称 | 用途 |
|---------|------|------|
| アーキテクチャ設計 | ARCH | システム全体構造 |
| データ設計 | DATA | データ構造・DB設計 |
| ハードウェア設計 | HW | ハードウェア仕様 |
| インターフェース設計 | IF | API・UI設計 |
| ソフトウェア設計 | SW | ソフトウェア全体設計 |
| 処理説明書 | PROC | ソースファイル別処理詳細 |

**例**: `12-002-PROC-001` （main.pyの処理説明書）

---

## 📋 処理説明書作成ルール

### 目的
**1ソースファイルに対し1つの処理説明書を作成**し、各関数の処理内容と入出力インターフェースを明確に記述する。

### 処理説明書の標準構成

```markdown
# [ソースファイル名] 処理説明書

**文書番号**: 12-002-PROC-[連番]  
**プロジェクト名**: 昆虫自動観察＆ログ記録アプリ  
**文書名**: [ソースファイル名] 処理説明書  
**対象ファイル**: [ソースファイルパス]  
**バージョン**: 1.0  
**作成日**: YYYY-MM-DD  
**作成者**: [作成者名]  

---

## 📋 ファイル概要

### 目的
[ソースファイルの役割・目的]

### 主要機能
- [機能1]
- [機能2]
- [機能3]

---

## 🔧 関数・メソッド仕様

### [関数名1]

**概要**: [関数の目的・役割]

**処理内容**:
1. [処理ステップ1]
2. [処理ステップ2]
3. [処理ステップ3]

**入力インターフェース**:
```python
def function_name(param1: type, param2: type) -> return_type:
```

| 引数名 | 型 | 必須 | 説明 |
|-------|---|------|------|
| param1 | type | ○ | [引数の説明] |
| param2 | type | × | [引数の説明] |

**出力インターフェース**:

| 戻り値 | 型 | 説明 |
|-------|---|------|
| 戻り値 | return_type | [戻り値の説明] |

**例外**:
| 例外名 | 発生条件 |
|-------|---------|
| ValueError | [発生条件] |
| FileNotFoundError | [発生条件] |

**使用例**:
```python
result = function_name(param1_value, param2_value)
```

---

### [関数名2]

[同様の形式で記述]

---

## 📊 データ構造

### [クラス名1]

**概要**: [クラスの目的・役割]

**属性**:
| 属性名 | 型 | 説明 |
|-------|---|------|
| attribute1 | type | [属性の説明] |
| attribute2 | type | [属性の説明] |

---

## 🔄 処理フロー

### メイン処理フロー
```
1. [処理1]
   ↓
2. [処理2]
   ↓
3. [処理3]
```

### エラー処理フロー
```
エラー発生
   ↓
[エラー処理1]
   ↓
[復旧処理または終了]
```

---

## 📝 実装メモ

### 注意事項
- [実装時の注意点1]
- [実装時の注意点2]

### 依存関係
- [依存モジュール1]
- [依存モジュール2]

---

## 🔄 更新履歴

| バージョン | 更新日 | 更新者 | 更新内容 |
|-----------|--------|--------|----------|
| 1.0 | YYYY-MM-DD | [作成者名] | 初版作成 |
```

### 処理説明書作成例

#### ファイル名: `main_processing_spec.md`

```markdown
# main.py 処理説明書

**文書番号**: 12-002-PROC-001  
**対象ファイル**: `main.py`  

---

## 🔧 関数・メソッド仕様

### main()

**概要**: システムのメインエントリーポイント

**処理内容**:
1. コマンドライン引数の解析
2. 設定ファイルの読み込み
3. システム初期化
4. 動作モードに応じた処理実行

**入力インターフェース**:
```python
def main() -> None:
```

**出力インターフェース**:
| 戻り値 | 型 | 説明 |
|-------|---|------|
| なし | None | 処理完了後に終了 |

**例外**:
| 例外名 | 発生条件 |
|-------|---------|
| SystemExit | 設定エラー・初期化失敗時 |

### initialize_system(config_path: str)

**概要**: システム初期化処理

**処理内容**:
1. 設定ファイル読み込み
2. ログシステム初期化
3. ハードウェア初期化

**入力インターフェース**:
```python
def initialize_system(config_path: str) -> bool:
```

| 引数名 | 型 | 必須 | 説明 |
|-------|---|------|------|
| config_path | str | ○ | 設定ファイルパス |

**出力インターフェース**:
| 戻り値 | 型 | 説明 |
|-------|---|------|
| success | bool | 初期化成功可否 |
```

---

## 🔄 バージョン管理

### バージョン番号規則
- **メジャーバージョン (X.0)**: 大幅な仕様変更
- **マイナーバージョン (X.Y)**: 機能追加・修正

### 更新タイミング
- 新しいソースファイル作成時
- 既存ソースファイルの大幅な変更時
- 関数の追加・削除・仕様変更時

---

## 📚 参考資料

- プロジェクトドキュメント管理標準規約 (`document_management_standards.md`)
- CLAUDE.md プロジェクトルール・ガイドライン

---

## 🔄 改版履歴

| バージョン | 更新日 | 更新者 | 更新内容 |
|-----------|--------|--------|----------|
| 2.0 | 2025-07-28 | 開発チーム | 処理説明書ルール追加・内容簡素化 |
| 1.0 | 2025-07-28 | 開発チーム | 初版作成 |